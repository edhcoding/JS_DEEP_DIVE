# 20 strict mode

## 20.1 strict mode란?

```jsx
function foo() {
	×= 10;
}
foo();

console.log(x); // ?
```

해당 코드에서 변수 x가 존재하지 않기 때문에 ReferenceError를 발생시킬 것 같지만, 자바스크립트 엔진은 **암묵적으로 전역 객체에 x 프로퍼티를 동적 생성**한다.

이때 전역 객체의 x프로퍼티는 전역 변수처럼 사용할 수 있다.

해당 현상을 **암묵적 전역**(implicit global)이라 한다.

ES5부터 추가된 strict mode는 자바스크립트 언어의 문법을 좀 더 엄격히 적용하여 오류를 발생시킬 가능성이 높거나 자바스크립트 엔진의 최적화 작업에 문제를 일으킬 수 있는 코드에 대해 **명시적인 에러**를 발생시킨다.

## 20.2 strict mode의적용

**전역의 선두** 또는 **함수의 몸체 선두**에 **`'use strict';`** 를 추가

## 20.3 전역에 strict mode를 적용하는 것은 피하자

strict mode는 스크립트 단위로 적용된다.

= 다른 스크립트에는 영향을 주지 않는다.

strict 스크립트와 non-strict를 혼용하는것은 오류를 발생시킬 수 있기 때문에 전역에 strict mode를 적용하는 것은 바람직하지 않다.

<aside>
💡 **this 값**

- **Non-strict mode**
  : 함수에서 `this`는 전역 객체(`window` 또는 `global`)를 가리킬 수 있다.
- **Strict mode**
  : `this`는 `undefined`가 된다.

</aside>

## 20.4 함수 단위로 strict mode를 적용하는 것도 피하자

함수 혼용도 문제 발생 야기

따라서 strict mode는 **`즉시 실행 함수로 감싼 스크립트 단위`**로 적용하는 것이 바람직하다.

## 20.5 strict mode가 발생시키는 에러

### 20.5.1 암묵적 전역

선언하지 않은 변수를 참조하면 ReferenceError 발생

### 20.5.2 변수, 함수, 매개변수의 삭제

delete 연산자로 변수, 함수, 매개변수를 삭제하면 SyntaxError가 발생

### 20. 5.3 매개변수 이름의 중복

중복된 매개변수 이름 사용시 SyntaxError 발생

### 20.5.4 with문 사용

with문 사용시 SyntaxError 발생

<aside>
💡 with문은 전달된 객체를 스코프 체인에 추가한다.

동일한 객체의 프로퍼티를 반복해서 사용할 때, **객체 이름을 생략**할 수 있다.

</aside>

## 20.6 strict mode 적용에 의한 변화

### 20.6.1 일반함수의 this

- **Non-strict mode**
  : 함수에서 `this`는 전역 객체(`window` 또는 `global`)를 가리킬 수 있다.
- **Strict mode**
  : `this`는 `undefined`가 된다.

### 20.6.2 arguments 객체

- **Non-strict mode**
  : 함수 내부에서 `arguments` 객체는 호출된 함수의 매개변수에 전달된 인수들을 유사 배열 객체로 제공한다. `arguments` 객체의 요소들을 수정하면 해당 매개변수의 값도 변경된다.
  ```jsx
  function nonStrictFunction(a, b, c) {
    console.log(arguments[0]); // 1
    arguments[0] = 10;
    console.log(a); // 10
  }
  nonStrictFunction(1, 2, 3);
  ```
- **Strict mode**
  : `arguments` 객체는 여전히 호출된 함수의 매개변수에 전달된 인수들을 유사 배열 객체로 제공하지만, `arguments` 객체의 요소들을 수정해도 해당 매개변수의 값은 변경되지 않는다.
  ```jsx
  function strictFunction(a, b, c) {
    "use strict";
    console.log(arguments[0]); // 1
    arguments[0] = 10;
    console.log(a); // 1
  }
  strictFunction(1, 2, 3);
  ```
